{% extends 'main.html' %}
{% load static %}

{% block title %} 
Set a New Password.
{% endblock title%}

{% block content %}

<main id="p_reset_confirm">
    <section>
        <div class="form_container">
            {% if validlink %}
            <h2>Set a New Password.</h2>

            <form action="" method="post"> {% csrf_token %}
                {% if form.no_field_errors %}
                    <div class="alert_alert_danger">
                        {% for error in form.non_field_errors %}
                        <p>{{error}}</p>
                        {% endfor %}
                    </div>
                {% endif %}

                <div class="form_group">
                    <label for="{{form.new_password1.id_for_label}}">New Password : </label>
                    {{form.new_password1}}
                    {% if form.new_password1.errors %}
                        <ul class="errorlist">
                            {% for error in form.new_password1.errors %}
                            <li>{{error}}</li>
                            {% endfor %}
                        </ul>
                    {% endif %}
                </div>

                <div class="form_group">
                    <label for="{{form.new_password2.id_for_label}}">Confirm Password : </label>
                    {{form.new_password2}}
                    {% if form.new_password2.errors %}
                        <ul class="errorlist">
                            {% for error in form.new_password2.errors %}
                            <li>{{error}}</li>
                            {% endfor %}
                        </ul>
                    {% endif %}
                </div>
                <button type="submit" class="btn-primary">Set Password</button>
            </form>
        </div>
        <div>
            {% else %}
            <div class="message_container">
                <h2>Invalid Link</h2>
                <p>
                    The Password reset link was invalid, possibly because it has already been used.
                    please request a new password reset.
                </p>
                <a href="{% url 'password_reset' %}">Request a New Password reset</a>
            </div>
            {% endif %}
        </div>
    </section>
</main>

{% endblock content %}