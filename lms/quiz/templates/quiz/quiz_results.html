{% extends 'main.html' %}
{% load static %}

{% block title %}
    {{page_title}}
{% endblock title %}

{% block content %}

<main>
    <section class="container mt-4">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card text-center">

                    <div class="card-header">
                        <h2>Quiz Results</h2>
                    </div>

                    <div class="card-body">
                        <h4 class="card-title">Quiz : {{attempt.quiz.title}}</h4>
                        <hr>

                        {% if attempt.passed %}
                            <div class="alert alert-success" role="alert">
                                <h4 class="alert-heading">Congratulations, you passed.</h4>
                            </div>
                        {% else %}
                            <div class="alert alert-danger" role="alert">
                                <h4 class="alert-heading">Unfortunately, you didn't pass.</h4>
                            </div>
                        {% endif %}

                        <h3>Your Score: {{attempt.score}}/{{attempt.total_marks}}</h3>

                        {% if attempt.total_marks > 0 %}
                            <p class="lead">You scored {{percentage_score|floatformat:2}}</p>
                        {% else %}
                            <p class="lead">The quiz has no graded questions.</p>
                        {% endif %}

                        <p class="text-muted">Passing score required: {{attempt.quiz.pass_percentage}}%</p>
                    </div>

                    <div class="card-footer">
                        <a href="{{attempt.quiz.lesson.get_absolute_url}}" class="btn btn-primary w-50">
                            Return to Lesson
                        </a>

                        <a href="{% url 'courses:course_details' attempt.quiz.lesson.module.course.slug %}" 
                            class="btn btn-secondary ">
                            Back to Course
                        </a>
                    </div>

                </div>
            </div>
        </div>
    </section>
</main>

{% endblock content %}